<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">
	<title>登录</title>
	<link rel="stylesheet" type="text/css" href="./css/login.css"/>
	<script type="text/javascript" src="./js/login.js"></script>
	
	<script type="text/javascript">  
        function changeImage(img){                
            img.src = img.src + "?" + new Date().getTime();
        }  
    </script> 
	
	<script type="text/javascript">
		function loadXMLDoc(event)
		{
			debugger;
			event.preventDefault(); 
			console.log(event)
			//debugger;
			var xmlhttp;
			if (window.XMLHttpRequest)
			 {// code for IE7+, Firefox, Chrome, Opera, Safari
					 xmlhttp=new XMLHttpRequest();
			 }
			else
			 {// code for IE6, IE5
				 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			 }
			xmlhttp.onreadystatechange=function()
			 {
				if (xmlhttp.readyState==4 && xmlhttp.status==200)
				 {
					alert(JSON.parse(xmlhttp.responseText).message);
				 }
			 }
			
			var u = document.getElementById("username");
			var p = document.getElementById("password");
			var c = document.getElementById("code");

			xmlhttp.open("GET","/wust7_sixfly/LoginServlet?username="+u.value+"&password="+p.value+"&code="+c.value,true);
			xmlhttp.send();
		}
	</script>
	
    </head>
    <body>
	<div id="append"></div>     
	<div class="w980 ClearFix" height="800px">
	    <div class="logo_box ClearFix">
		    
		  <div class="login_b_r ClearFix">
		    <div class="loginul ClearFix">
			     <div class="login_h2 ClearFix">
			       <h2>登录火车售票官网</h2>
				     <div class="lognrtop">
				        还没有系统账号<a href="zc.html">快速注册</a>
				     </div>
			     </div>
			<div class="co">
			    <div class="from">
				<form id="" action="" method="post">
					<div id="myDiv"> </div>
				    <div class="item">
					                    <input class="itxt" id="username" name="username" placeholder="请输入用户名/注册名" value="" onblur="check1()" >
			         	                <div class="err_box">
                                            <div class="err_msg2" id="error" style="display: show; color:red ">    
                                      
                                            </div>
                                        </div>
				    </div>
				    <div class="item">
                                        <input class="itxt" id="password" name="password"  placeholder="请输入密码" type="password" value="" onblur="check2()">
                                        <div class="err_box">
                                            <div class="err_msg2" id="error1" style="display:  show; color:red ">
											</div>
                                        </div>
				    </div>
   				    <div class="item">
					<input placeholder="验证码" autocomplete="off" maxlength="4" size="10" id="code" name="code" class="itxt itxt_yzm onfocustxt" tabindex="3" type="text">  	
						 <img src="/wust7_sixfly/IdentifyingcodeServlet" onclick="changeImage(this)">					  	      
					          <div class="err_box">
                                    <div class="err_msg2" style="display: show;color:red" id="error_captcha"></div>
                              </div>
				    </div>
				    <div class="item item4">
					<div class="safe ClearFix">
                                            <span>
                                                <input tabindex="4" class="jdcheckbox" name="autoLogin" id="autoLogin" checked="checked" type="checkbox">
                                                <label for="autoLogin">记住用户名</label>
                                            </span>
                                            <span class="forget-pw-safe">
                                                <a target="_blank" class="" href="">忘记密码？</a>
                                            </span>
					</div>
				    </div>
				    <div class="item">
						<div class="login-btn">      
                        	<button type="button" class="reg_button" onclick="loadXMLDoc(event)" >立即登录</button>
                        </div>
				    </div>
				</form>
			    </div>
		    </div>
		</div>
       	    </div>
        </div>
    </div>

<script type="text/javascript">
function check1(){
  var u = document.getElementById("username");
  var reg = /^[a-zA-Z0-9]{4,16}$/;
  if(!reg.test(u.value))
  {
    document.getElementById("error").innerHTML="用户名必须是长度位4-16的英文或数字字符串";
  }
  else
  {
    document.getElementById("error").innerHTML="";
  }
}

function check2(){
  var p = document.getElementById("password");
  var reg1 = /^[a-zA-Z0-9]{4,20}$/;
  if(!reg1.test(p.value))
  {
    document.getElementById("error1").innerHTML="密码必须是长度位4-20的英文或数字字符串";
  }
  else
  {
    document.getElementById("error1").innerHTML="";
  }
}

  </script>

</body>
</html>
